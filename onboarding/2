<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --ivory:#FAF9F7; --blush:#EAD4D8; --greige:#C7BEB8; --silver:#C9CCD6; --cta:#D8A7B1;
    --ink:#1f1f1f; --muted:#5d5d5d; --radius:22px;
    --shadow: 0 16px 44px rgba(0,0,0,.10); --shadow-soft: 0 10px 26px rgba(0,0,0,.06);
  }
  .cm{ min-height: 86vh; background:
      radial-gradient(1200px 600px at 20% 0%, rgba(234,212,216,.58), transparent 60%),
      radial-gradient(900px 520px at 90% 10%, rgba(201,204,214,.55), transparent 55%),
      var(--ivory);
    color: var(--ink);
    font-family: "Libre Baskerville", Georgia, serif;
    display:grid; place-items:center; padding: 28px 18px;
  }
  .cm-card{
    width:min(760px,100%);
    background: rgba(250,249,247,.85);
    border: 1px solid rgba(31,31,31,.08);
    border-radius: calc(var(--radius) + 8px);
    box-shadow: var(--shadow);
    padding: 26px;
  }
  .cm-top{
    display:flex; align-items:center; justify-content:space-between; gap: 12px; flex-wrap:wrap;
    margin-bottom: 10px;
  }
  .cm-progress{
    display:flex; align-items:center; gap: 10px;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color: var(--muted);
    font-size: 13px;
  }
  .cm-bar{
    width: 180px; height: 8px; border-radius: 999px;
    background: rgba(201,204,214,.35);
    overflow:hidden;
    border: 1px solid rgba(31,31,31,.06);
  }
  .cm-bar > i{ display:block; width:33%; height:100%; background: rgba(216,167,177,.75); }
  h1{ margin: 10px 0 10px; font-size: clamp(26px, 3.6vw, 38px); line-height: 1.08; }
  .cm-lead{
    margin:0 0 18px; color: var(--muted);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    font-size: 15.5px; line-height: 1.8; max-width: 62ch;
  }
  .cm-row2{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  label{
    display:block; margin: 0 0 8px;
    color: rgba(0,0,0,.72);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    font-size: 13px;
  }
  input{
    width:100%;
    padding: 14px 14px;
    border-radius: 16px;
    border: 1px solid rgba(31,31,31,.12);
    background: rgba(250,249,247,.92);
    outline:none;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    font-size: 16px;
  }
  input:focus{ border-color: rgba(216,167,177,.95); box-shadow: 0 0 0 4px rgba(216,167,177,.18); }
  .cm-actions{ display:flex; gap: 10px; flex-wrap:wrap; margin-top: 14px; }
  .cm-btn{
    display:inline-flex; align-items:center; justify-content:center; gap: 10px;
    padding: 14px 18px; border-radius: 999px;
    border: 1px solid rgba(31,31,31,.10);
    cursor:pointer; transition: transform .12s ease, opacity .12s ease;
    font-weight: 650; letter-spacing:.2px; user-select:none; white-space:nowrap;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  .cm-primary{ background: linear-gradient(180deg, rgba(216,167,177,.98), rgba(216,167,177,.88)); box-shadow: var(--shadow-soft); }
  .cm-secondary{ background: rgba(250,249,247,.75); box-shadow: var(--shadow-soft); }
  .cm-btn:active{ transform: translateY(1px); }
  .cm-error{ margin-top: 10px; display:none;
    color: rgba(0,0,0,.72);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    font-size: 13px;
  }
  .cm-error.show{ display:block; }
  @media (max-width:640px){
    .cm-row2{ grid-template-columns: 1fr; }
    .cm-actions .cm-btn{ width:100%; }
    .cm-bar{ width: 140px; }
  }
</style>

<div class="cm">
  <div class="cm-card">
    <div class="cm-top">
      <div class="cm-progress">
        <span>√âtape 1/3</span>
        <span class="cm-bar" aria-hidden="true"><i></i></span>
      </div>
      <button class="cm-btn cm-secondary" id="cmBack">‚Üê Retour</button>
    </div>

    <h1>Comment vous appelez-vous ?</h1>
    <p class="cm-lead">Juste pour personnaliser votre carnet. Rien de lourd. Rien de compliqu√©.</p>

    <div class="cm-row2">
      <div>
        <label>Pr√©nom 1</label>
        <input id="cmP1" placeholder="Ex : Sarah" autocomplete="given-name" />
      </div>
      <div>
        <label>Pr√©nom 2</label>
        <input id="cmP2" placeholder="Ex : Adam" autocomplete="given-name" />
      </div>
    </div>

    <div class="cm-actions">
      <button class="cm-btn cm-primary" id="cmNext">Continuer</button>
    </div>

    <div class="cm-error" id="cmErr">üòï Mets vos deux pr√©noms pour continuer.</div>
  </div>
</div>

<script>
(function(){
  const prevUrl = "/";
  const nextUrl = "/onboarding/2";
  const p1 = document.getElementById("cmP1");
  const p2 = document.getElementById("cmP2");
  const err = document.getElementById("cmErr");

  // guard: require weddingDate
  const data = safeGet();
  if(!data.weddingDate) window.location.href = prevUrl;

  // preload
  if(data.prenom1) p1.value = data.prenom1;
  if(data.prenom2) p2.value = data.prenom2;

  document.getElementById("cmBack").addEventListener("click", ()=> window.location.href = prevUrl);

  document.getElementById("cmNext").addEventListener("click", ()=>{
    const v1 = (p1.value||"").trim();
    const v2 = (p2.value||"").trim();
    if(!v1 || !v2){
      err.classList.add("show");
      return;
    }
    err.classList.remove("show");
    data.prenom1 = v1; data.prenom2 = v2;
    safeSet(data);
    window.location.href = nextUrl;
  });

  function safeGet(){ try{ return JSON.parse(localStorage.getItem("cm_onboarding")||"{}"); }catch(e){ return {}; } }
  function safeSet(o){ try{ localStorage.setItem("cm_onboarding", JSON.stringify(o)); }catch(e){} }
})();
</script>
